<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Malen nach Zahlen – Landnutzungserfassung in OpenStreetMap in Deutschland</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/white.css">
		<link rel="stylesheet" href="custom.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
                                <section>
				    <section data-markdown>
                                        # Malen nach Zahlen – Landnutzungserfassung in OpenStreetMap in Deutschland 

                                        Michael Reichert

                                        FOSSGIS-Konferenz 2024
                                    </section>
				    <section data-markdown>
                                        ## Gliederung

                                        * Motivation
                                        * Tagging
                                        * Flächendeckung und Überlappung
                                        * Multipolygon-Relationen
                                        * Kleben oder Trennen
                                        * Alter
                                        * Technisches zur Auswertung
                                    </section>
                                </section>
                                <section>
                                    <h2>Motivation</h2>
                                    <div class="r-stack">
                                        <img class="fragment" src="img/forum-de-landuse.png">
                                        <img class="fragment" style="transform: rotate(15deg);" src="img/forum-de-multipolygon.png">
                                        <img class="fragment" style="transform: rotate(25deg);" src="img/forum-de-multipolygon-wahnsinn.png">
                                        <img class="fragment" style="transform: rotate(-25deg);" src="img/forum-de-verkleben-landuse.png">
                                    </div>
                                </section>
				<section class="tags-slide">
                                    <h2>Definiere Landnutzung …</h2>
                                    <p>
                                            <span class="osmtag">
                                                landuse&nbsp;=&nbsp;*
                                                waterway&nbsp;=&nbsp;*
                                                natural&nbsp;=&nbsp;*
                                                military&nbsp;=&nbsp;*
                                            </spanp>
                                    </p>
                                    <div class="tags-slide-table">
                                        <div class="cols2" style="flex-grow: 1;">
                                            <p>Außer:</p>
                                            <p class="osmtag">landuse&nbsp;= <br><span class="strike">winter_sports</span></p>
                                            <p class="osmtag">natural&nbsp;= <span class="strike">bay, strait, mountain_range, crater_rim, peninsula, valley</span></p>
                                            <p class="osmtag">military&nbsp;= <span class="strike">danger_area, nuclear_explosion_site, office</span></p>
                                        </div>
                                        <div class="cols2" style="flex-grow: 2;">
                                            <p>Auch:</p>
                                            <p class="osmtag">amenity&nbsp;= police, fire_station, prison, nursing_home,</p>
                                            <p class="osmtag">tourism&nbsp;= camp_site, caravan_site, zoo, theme_park</p>
                                            <p class="osmtag">man_made&nbsp;= wastewater_plant, water_works</p>
                                            <p class="osmtag">leisure&nbsp;= playground, dog_park, sports_centre, water_park, golf_course, stadium, ice_rink </p>
                                        </div>
                                    </div>
                                </section>
                                <section>
				    <section data-markdown>
                                        ## Featureklassen

                                        ![Verteilung der Featureklassen](plots/feature_classes_with_overlaps.svg)
                                    </section>
				    <section>
                                        <h2>Flächendeckung pro Gemeinde</h2>
                                        <iframe src="maps/landuse_coverage_per_municipality.html" width="900" height="500"></iframe>
                                    </section>
				    <section data-markdown>
                                        ## Überlappung
                                        
                                        ![Verteilung der Featureklassen](plots/overlaps_matrix.svg)
                                    </section>
				    <section data-markdown>
                                        ## Featureklassen (Überlappungen eliminiert)

                                        ![Verteilung der Featureklassen](plots/feature_classes_without_overlaps.svg)
                                    </section>
                                </section>
                                <section style="font-size: 90%;" class="multipolygon-slides">
				    <section>
                                        <h2>Multipolygone (Einführung)</h2>

                                        <img alt="einfacher Way" src="img/Multipolygon_Illustration_0.svg">

                                        <p>Way 1: <span class="osmtag">landuse=forest</span></p>
                                    </section>
				    <section>
                                        <h2>Multipolygone (Einführung)</h2>

                                        <img alt="Multipolygon-Relation mit einem inneren Ring" src="img/Multipolygon_Illustration_1.svg">

                                        <p>Relation 1: <span class="osmtag">type=multipolygon</span> + <span class="osmtag">landuse=forest</span><br>
                                        Way 1: keine Tags<br>
                                        Way 2: irgendwelche Tags</p>
                                    </section>
				    <section>
                                        <h2>Multipolygone (Einführung)</h2>

                                        <img alt="Multipolygon-Relation mit zwei inneren Ringen" src="img/Multipolygon_Illustration_2.svg">

                                        <p>Relation 1: <span class="osmtag">type=multipolygon</span> + <span class="osmtag">landuse=forest</span><br>
                                        Way 1: keine Tags<br>
                                        Way 2: irgendwelche Tags<br>
                                        Way 3: irgendwelche Tags</p>
                                    </section>
				    <section>
                                        <h2>Multipolygone (Einführung)</h2>

                                        <img alt="Multipolygon-Relation mit zwei äußeren Ways" src="img/Multipolygon_Illustration_3a.svg">

                                        <p>Relation 1: <span class="osmtag">type=multipolygon</span> + <span class="osmtag">landuse=forest</span><br>
                                        Way 1: irgendwelche Tags, z.B. <span class="osmtag">highway=primary</span><br>
                                        Way 2: irgendwelche Tags, z.B. <span class="osmtag">highway=track</span></p>
                                    </section>
                                </section>
                                <section>
				    <section data-markdown>
                                        ## Anteil Multipolygone (Anzahl Objekte)

                                        ![Plot einfache Polygone vs. Multipolygone](plots/multipolygons_vs_simple_polygons_bar.svg)
                                    </section>
				    <section>
                                        <h2>Unnötige Multipolygone (Definition)</h2>

                                        <img height="300" src="img/Multipolygon_Illustration_1_noetig.svg">
                                        <img height="300" src="img/Multipolygon_Illustration_3a_unnoetig.svg">
                                        <img height="300" src="img/Multipolygon_Illustration_4_unnoetig.svg">
                                    </section>
				    <section data-markdown>
                                        ## Unnötige Multipolygone pro Gemeinde

                                        ![Plot Histogramm Multipolygonitis pro Gemeinde](plots/multipolygonitis_histogram.svg)
                                    </section>
				    <section>
                                        <h2>Unnötige Multipolygone pro Gemeinde</h2>
                                        <iframe src="maps/multipolygonitis_score.html" width="900" height="500"></iframe>
                                    </section>
                                </section>
                                <section>
				    <section>
                                        <h2>Trennung von Verkehrswegen und Landnutzung</h2>

                                        <img height="300" src="img/separated_landuse.svg">
                                        <img height="300" src="img/sticky_landuse.svg">
                                    </section>
				    <section>
                                        <h2>Mit Straßen verbundene Landnutzung</h2>

                                        <img height="400" src="img/sticky_landuse_josm.jpg">
                                    </section>
				    <section>
                                        <h2>Von Straßen getrennte Landnutzung</h2>

                                        <img height="400" src="img/separated_landuse_josm.jpg">
                                    </section>
				    <section>
                                        <h2>Von Straßen getrennte Landnutzung</h2>

                                        <img height="400" src="img/almost_touching_landuse_josm.jpg">
                                    </section>
				    <section class="smaller-font">
                                        <h2>Mit Straßen verklebte Landnutzung</h2>
                                        <p>Länge der verklebten Straßen bezogen auf gesamte Straßennetzlänge</p>
                                        <iframe src="maps/roads_as_landuse_boundary_fraction.html" width="900" height="500"></iframe>
                                    </section>
				    <section class="smaller-font">
                                        <h2>Beinahe Straßen verklebte Landnutzung</h2>
                                        <p>Länge der beinahe verklebten Straßen bezogen auf gesamte Straßennetzlänge (Abstand max. 0,5 m)</p>
                                        <iframe src="maps/almost_sticky_roads.html" width="900" height="500"></iframe>
                                    </section>
                                </section>
                                <section>
				    <section>
                                        <h2>Wie alt sind unsere Wälder?</h2>

                                        <img alt="Screenshot JOSM eines Waldes von 2008" src="img/landsat-wald.jpg" height="450">

                                        <p style="font-size: 60%;">Wald bei Eiterfeld (Kr. Fulda) aus dem Jahr 2008 (vermutlich mit Yahoo- oder Landsat-Bildern)</p>
                                    </section>
				    <section data-markdown>
                                        ## Alter der Objekte

                                        Versionsgeschichte schwierig auszuwerten:

                                        * Teilen von Ways
                                        * mechanische Edits an Tags
                                        * Hinzufügen einzelner Nodes

                                        Lösung: Nodes auswerten
                                    </section>
				    <section data-markdown>
                                        ## Alter der Nodes

                                        ![Plot Histogramm Node-Alter](plots/node_age_histogram.svg)
                                    </section>
				    <section data-markdown>
                                        ## Median-Alter der Nodes der Polygone

                                        ![Plot Histogramm Median des Node-Alters der Polygone](plots/median_node_age_histogram.svg)
                                    </section>
				    <section>
                                        <h2>Wo sind die alten Polygone?</h2>
                                        <p>Median-Alter der Nodes pro Gemeinde</p>
                                        <iframe src="maps/median_node_age.html" width="900" height="450"></iframe>
                                    </section>
                                </section>
                                <section>
				    <section data-markdown>
                                        ## Technik

                                        * Datenimport: Osm2pgsql, Flex-Output, eigene Konfiguration
                                        * Auswertung: PostgreSQL und etwas Python (via Jupyter Notebook)
                                        * Plots: Matplotlib
                                        * Karten: Shortbread, Versatiles Neutrino, Martin, Maplibre GL JS

                                        https://github.com/nakaner/landuse-analysis
                                    </section>
				    <section data-markdown>
                                        ## Fragen?                                       

                                        Michael Reichert

                                        osm-ml@michreichert.de
                                    </section>
                                </section>
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
